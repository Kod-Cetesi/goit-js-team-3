const c="8a4d9ed67b7d6af3412d8460b7ed63ee",d="https://api.themoviedb.org/3",k="https://image.tmdb.org/t/p/w500",u=document.getElementById("movies");document.getElementById("search-form");const m=document.getElementById("search-input"),h=document.getElementById("search-btn"),y=document.getElementById("membership");let p=null;async function f(t="",e=""){t===""&&e===""?await w(`${d}/movie/popular?api_key=${c}&language=en-US&page=1`):e!==""&&t===""?await M(e):await $(t,e)}async function M(t){try{const e=`${d}/discover/movie?api_key=${c}&language=en-US&primary_release_year=${t}&sort_by=popularity.desc&page=1`,o=await(await fetch(e)).json();g(o.results)}catch(e){console.error("Error fetching movies by year:",e)}}async function $(t,e=""){try{let n=`${d}/search/movie?api_key=${c}&language=en-US&query=${t}`;e&&(n+=`&primary_release_year=${e}`);const s=await(await fetch(n)).json();g(s.results)}catch(n){console.error("Error searching movies:",n)}}h&&h.addEventListener("click",async t=>{t.preventDefault();const e=m.value.trim(),n=y.value.trim();await f(e,n)});m&&m.addEventListener("keydown",t=>{if(t.key==="Enter"){t.preventDefault();const e=m.value.trim(),n=y.value.trim();f(e,n)}});async function b(){try{const e=await(await fetch(`${d}/discover/movie?api_key=${c}&language=en-US&sort_by=popularity.desc`)).json(),n=Math.floor(Math.random()*e.results.length),o=e.results[n];S(o)}catch(t){console.error("Film verisi alınırken bir hata oluştu:",t)}}function _(t){const e=document.createElement("div");e.classList.add("star-rating");const n=t/2,o=Math.floor(n),s=n%1>=.5?1:0,i=5-o-s;for(let a=0;a<o;a++){const r=document.createElement("span");r.classList.add("star","full"),r.innerHTML="★",e.appendChild(r)}if(s){const a=document.createElement("span");a.classList.add("star","half"),a.innerHTML="☆",e.appendChild(a)}for(let a=0;a<i;a++){const r=document.createElement("span");r.classList.add("star","empty"),r.innerHTML="☆",e.appendChild(r)}return e}function S(t){const e=document.querySelector(".hero-title");e.textContent=t.title;const n=document.querySelector(".hero");n.style.backgroundImage=`url(https://image.tmdb.org/t/p/original/${t.backdrop_path||""})`;const o=document.querySelector(".hero-description");o.textContent=t.overview||"Bu film için açıklama mevcut değil.";const s=document.querySelector(".more-details-btn");s.href=`https://www.themoviedb.org/movie/${t.id}`;const i=document.querySelector(".hero-rating");i.innerHTML="",i.appendChild(_(t.vote_average||0))}async function w(t){try{const n=await(await fetch(t)).json();g(n.results)}catch(e){console.error("Error fetching movies:",e)}}async function g(t){if(u.innerHTML="",t.length===0)u.innerHTML="<p>No movies found.</p>";else for(let e of t){const{id:n,title:o,poster_path:s,vote_average:i,release_date:a,genre_ids:r}=e,L=(r?await Promise.all(r.map(E=>B(E))):[]).join(", ")||"N/A",l=document.createElement("div");l.classList.add("movie-card"),l.setAttribute("data-id",n),l.innerHTML=`
        <div class="movie-poster-container">
          <img 
            class="movie-poster" 
            src="${s?k+s:"https://via.placeholder.com/200x300?text=No+Image"}" 
            alt="${o}" 
          />
          <div class="movie-overlay">
            <h3 class="movie-title">${o}</h3>
            <div class="movie-date-genres">
            <p class="movie-release-date">${a?new Date(a).getFullYear():"N/A"}</p>
            <p class="movie-genres">${L}</p>
            <div class="movie-info">
              <p class="movie-rating">⭐ ${i.toFixed(1)}</p>
            </div>
          </div>
          </div>
        </div>

      `,u.appendChild(l)}}async function B(t){p||(p=(await(await fetch(`${d}/genre/movie/list?api_key=${c}&language=en-US`)).json()).genres);const e=p.find(n=>n.id===t);return e?e.name:"Unknown"}const I=document.getElementById("theme-switcher"),v=document.body;I.addEventListener("click",()=>{v.classList.toggle("dark-mode");const t=v.classList.contains("dark-mode");localStorage.setItem("theme",t?"dark":"light")});document.addEventListener("DOMContentLoaded",()=>{localStorage.getItem("darkMode")==="enabled"&&document.body.classList.add("dark-mode"),b(),w(`${d}/movie/popular?api_key=${c}&language=en-US&page=1`)});document.addEventListener("DOMContentLoaded",()=>{document.addEventListener("click",t=>{const e=t.target.closest(".movie-card");e&&console.log(e.getAttribute("data-id"))})});document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("movies"),e=document.getElementById("load-more");let n=2;const o=600,s=3;e.addEventListener("click",()=>{n++,t.style.gridTemplateRows=`repeat(${n}, ${o}px)`,t.style.maxHeight=`${n*o+60}px`;const i=t.children.length;n*s>=i&&(e.style.display="none")})});
//# sourceMappingURL=api-service-2-CQi0KLOt.js.map
