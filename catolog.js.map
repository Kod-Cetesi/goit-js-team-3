{"version":3,"file":"catolog.js","sources":["../src/js/pagination-2.js","../src/js/modal.js"],"sourcesContent":["// Değişkenler\nlet currentPage = 1;\nlet totalPages = 0;\nconst moviesPerPage = 20;\nconst movieList = document.querySelector('.movie-grid');\nconst prevBtn = document.getElementById('prev-btn');\nconst nextBtn = document.getElementById('next-btn');\nconst paginationContainer = document.querySelector('.page-numbers');\nconst apiKey = '8a4d9ed67b7d6af3412d8460b7ed63ee'; // TMDB API anahtarınızı buraya koyun\n\nlet genreMap = {};\n\n// Tür listesini çek ve genreMap'i doldur\nasync function fetchGenres() {\n    try {\n        const response = await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=${apiKey}&language=en-US`);\n        const data = await response.json();\n        genreMap = data.genres.reduce((map, genre) => {\n            map[genre.id] = genre.name;\n            return map;\n        }, {});\n    } catch (error) {\n        console.error(\"Error fetching genres:\", error);\n    }\n}\n\n// Filmleri çek ve ekrana render et\nasync function fetchMovies(page = 1) {\n    try {\n        const response = await fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=${apiKey}&page=${page}`);\n        const data = await response.json();\n        totalPages = data.total_pages;\n\n        if (!data.results || data.results.length === 0) {\n            movieList.innerHTML = `<p class=\"error\">No movies found for this page.</p>`;\n            return;\n        }\n\n        renderMovies(data.results);\n        renderPagination();\n        updatePaginationButtons();\n    } catch (error) {\n        console.error(\"Error fetching movies:\", error);\n        movieList.innerHTML = `<p class=\"error\">Movies could not be loaded. Please try again later.</p>`;\n    }\n}\n\n// Filmleri render et\nfunction renderMovies(movies) {\n    movieList.innerHTML = movies\n        .map((movie) => {\n            const movieGenres = (movie.genre_ids || [])\n                .map((id) => genreMap[id])\n                .filter(Boolean)\n                .join(\", \");\n\n            return `\n            <div class=\"movie-card\" data-id=\"${movie.id}\">\n                <div class=\"movie-poster-container\">\n                    <img src=\"${movie.poster_path \n                        ? `https://image.tmdb.org/t/p/w500${movie.poster_path}` \n                        : 'path/to/placeholder.jpg'}\" \n                         class=\"movie-poster\" alt=\"${movie.title}\">\n                    <div class=\"movie-overlay\">\n                        <h3 class=\"movie-title\">${movie.title}</h3>\n                        <div class=\"movie-date-genres\">\n                        <p class=\"movie-genres\">${movieGenres || \"N/A\"} |</p>\n                        <p class=\"movie-release-date\">${\n                            movie.release_date\n                                ? new Date(movie.release_date).getFullYear()\n                                : \"N/A\"\n                        }</p>\n                           \n                        </div>\n                    </div>\n                </div>\n                <div class=\"movie-info\">\n                    <p class=\"movie-rating\">⭐ ${movie.vote_average?.toFixed(1) || \"N/A\"}</p>\n                </div>\n            </div>\n            `;\n        })\n        .join(\"\");\n}   \n\n// Sayfa numaralarını render et\nfunction renderPagination() {\n    paginationContainer.innerHTML = '';\n\n    const startPage = Math.max(1, currentPage - 2);\n    const endPage = Math.min(totalPages, currentPage + 2);\n\n    if (startPage > 1) addPaginationButton(1);\n    if (startPage > 2) addDots();\n\n    for (let i = startPage; i <= endPage; i++) addPaginationButton(i);\n\n    if (endPage < totalPages - 1) addDots();\n    if (endPage < totalPages) addPaginationButton(totalPages);\n}\n\n// Sayfa numarası ekleme\nfunction addPaginationButton(page) {\n    const pageElement = document.createElement('span');\n    pageElement.classList.add('page');\n    if (page === currentPage) pageElement.classList.add('active');\n    pageElement.textContent = page;\n    pageElement.addEventListener('click', () => {\n        if (currentPage !== page) {\n            currentPage = page;\n            fetchMovies(currentPage);\n        }\n    });\n    paginationContainer.appendChild(pageElement);\n}\n\n// \"...\" noktaları ekleme\nfunction addDots() {\n    const dotsElement = document.createElement('span');\n    dotsElement.classList.add('dots');\n    dotsElement.textContent = '...';\n    paginationContainer.appendChild(dotsElement);\n}\n\n// Sayfalama butonlarını güncelle\nfunction updatePaginationButtons() {\n    prevBtn.disabled = currentPage === 1;\n    nextBtn.disabled = currentPage === totalPages;\n}\n\n// Önceki sayfaya git\nprevBtn.addEventListener('click', () => {\n    if (currentPage > 1) {\n        currentPage--;\n        fetchMovies(currentPage);\n    }\n});\n\n// Sonraki sayfaya git\nnextBtn.addEventListener('click', () => {\n    if (currentPage < totalPages) {\n        currentPage++;\n        fetchMovies(currentPage);\n    }\n});\n\n// Başlangıç\nasync function initialize() {\n    await fetchGenres(); // Türleri al\n    fetchMovies(currentPage); // İlk sayfa filmleri getir\n}\n\ninitialize();\n","// BASE_URL Tanımlaması\nconst BASE_URL = \"https://api.themoviedb.org/3\";\n\n// API Anahtarınızı buraya ekleyin\nconst API_KEY = '8a4d9ed67b7d6af3412d8460b7ed63ee';\n\n// Modal öğelerini seçme\nconst modal = document.getElementById('movie-modal');\nconst closeButton = document.querySelector('.close-button');\nconst modalPoster = document.getElementById('modal-poster');\nconst modalTitle = document.getElementById('modal-title');\nconst modalVotes = document.getElementById('modal-votes');\nconst modalPopularity = document.getElementById('modal-popularity');\nconst modalGenre = document.getElementById('modal-genre');\nconst modalOverview = document.getElementById('modal-overview');\nconst addToLibraryButton = document.getElementById('add-to-library');\n\n// Kullanıcı hangi filme tıkladıysa onu tutan değişken\nlet currentMovie = null;\n\n// Kartlara tıklama olayını dinleme\ndocument.addEventListener('click', async (event) => {\n    const card = event.target.closest('.movie-card');\n    if (card) {\n        const movieId = card.getAttribute('data-id'); // Kartın data-id'sini al\n        if (movieId) {\n            try {\n                const movieData = await fetchMovieDetails(movieId); // Film detaylarını getir\n                if (movieData) {\n                    openModal(movieData); // Modalı aç\n                } else {\n                    console.error(\"Film detayları getirilemedi.\");\n                }\n            } catch (error) {\n                console.error(\"Film detayları alınırken hata oluştu:\", error);\n            }\n        } else {\n            console.error(\"Kart üzerinde geçerli bir movieId bulunamadı.\");\n        }\n    }\n});\n\n// API'den film detaylarını getirme fonksiyonu\nasync function fetchMovieDetails(movieId) {\n    try {\n        if (!movieId) {\n            throw new Error('Geçersiz film ID');\n        }\n        const response = await fetch(`${BASE_URL}/movie/${movieId}?api_key=${API_KEY}&language=en-US`);\n        if (!response.ok) {\n            throw new Error(`Film detayları getirilemedi: ${response.status}`);\n        }\n        const data = await response.json();\n        console.log(\"Movie Data:\", data); // API yanıtını konsola yazdır\n        return data;\n    } catch (error) {\n        console.error('Error fetching movie details:', error);\n        return null; // Hata durumunda null döndür\n    }\n}\n\n// Modalı açma fonksiyonu\nfunction openModal(movie) {\n    try {\n        currentMovie = movie; // Seçili filmi sakla\n\n        modalPoster.src = movie.poster_path\n            ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`\n            : 'https://via.placeholder.com/250x350?text=No+Image';\n        modalTitle.textContent = movie.title || 'No Title';\n        modalVotes.textContent = `${movie.vote_average?.toFixed(1) || 'N/A'} / ${movie.vote_count || '0'}`;\n        modalPopularity.textContent = movie.popularity?.toFixed(1) || 'N/A';\n        modalGenre.textContent = movie.genres\n            ? movie.genres.map((genre) => genre.name).join(', ')\n            : 'N/A';\n        modalOverview.textContent = movie.overview || 'No description available.';\n\n        // Modal'ı aç\n        modal.classList.remove('visually-hidden');\n        document.body.style.overflow = 'hidden'; // Arkaplan kaydırmayı engelle\n    } catch (error) {\n        console.error('Error opening modal:', error);\n    }\n}\n\n// Modalı kapatma fonksiyonu\nfunction closeModal() {\n    modal.classList.add('visually-hidden');\n    document.body.style.overflow = 'auto'; // Arkaplan kaydırmayı aç\n}\n\n// Modal kapatma butonunu dinleme\ncloseButton.addEventListener('click', closeModal);\n\n// Modal dışında bir yere tıklayınca kapatma\nwindow.addEventListener('click', (event) => {\n    if (event.target === modal) {\n        closeModal();\n    }\n});\n\n// **Filmi Library'ye Kaydetme**\naddToLibraryButton.addEventListener('click', () => {\n    let savedMovies = JSON.parse(localStorage.getItem('library')) || [];\n\n    if (!savedMovies.some(movie => movie.id === currentMovie.id)) {\n        savedMovies.push(currentMovie);\n        localStorage.setItem('library', JSON.stringify(savedMovies));\n        alert(\"Movie added to library!\");\n    } else {\n        alert(\"This movie is already in your library.\");\n    }\n});\n"],"names":["currentPage","totalPages","movieList","prevBtn","nextBtn","paginationContainer","apiKey","genreMap","fetchGenres","map","genre","error","fetchMovies","page","data","renderMovies","renderPagination","updatePaginationButtons","movies","movie","movieGenres","id","_a","startPage","endPage","addPaginationButton","addDots","i","pageElement","dotsElement","initialize","BASE_URL","API_KEY","modal","closeButton","modalPoster","modalTitle","modalVotes","modalPopularity","modalGenre","modalOverview","addToLibraryButton","currentMovie","event","card","movieId","movieData","fetchMovieDetails","openModal","response","_b","closeModal","savedMovies"],"mappings":"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"}